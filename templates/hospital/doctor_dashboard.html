{% extends 'hospital/doctor_base.html' %}
{% load static %}
{% block content %}
{%include 'hospital/doctor_dashboard_cards.html'%}
<br><br><br><br>
<div class="container">
  <div class="row">
    <div class="panel panel-primary" style="margin-left:15%;">
      <div class="panel-heading" style="text-align:center;">
        <h6 class="panel-title">Recent Appointments For You</h6>
      </div>
      <table class="table table-hover" id="dev-table">
        <thead>
          <tr>
            <th>Patient Name</th>
            <th>Picture</th>
            <th>Description</th>
            <th>Mobile</th>
            <th>Address</th>
            <th>Date</th>
          </tr>
        </thead>
        {% for a,p in appointments %}
        <tr>
          <td>{{a.patientName}}</td>
          <!-- 关键修改：添加空值判断 + 移除多余的static标签 + 显示默认头像 -->
          <td>
            {% if p.profile_pic %}
              <img src="{{ p.profile_pic.url }}" alt="Profile Pic" height="40px" width="40px" />
            {% else %}
              <!-- 空头像时显示默认占位图（可替换为你自己的默认图片链接） -->
              <img src="https://image.so.com/ai/large/view?end=60&id=53991531fcf8d99e5b27f27a210792c8&q=%E9%BB%91%E8%89%B2%E5%9B%BE%E7%89%87&tab=all&srcg=imglist_img" alt="Default Profile" height="40px" width="40px" />
            {% endif %}
          </td>
          <td>{{a.description}}</td>
          <td>{{p.mobile}}</td>
          <td>{{p.address}}</td>
          <td>{{a.appointmentDate}}</td>
        </tr>
        {% endfor %}
      </table>
    </div>
  </div>
</div>
<!--
developed By : sumit kumar
facebook : fb.com/sumit.luv
youtube : youtube.com/lazycoders
-->

{% endblock content %}